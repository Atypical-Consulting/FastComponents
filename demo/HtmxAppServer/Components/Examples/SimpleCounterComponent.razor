@using HtmxAppServer.Models
@inherits SimpleHtmxComponent<CounterState>

<div id="simple-counter">
  <h3>ðŸ“Š Simplified Counter</h3>
  <div class="grid">
    @HtmxBuilderExtensions.Button("âˆ’", Url(s => s with { Count = s.Count - 1 }), "simple-counter")
    <span style="text-align: center; font-weight: bold;">@State.Count</span>
    @HtmxBuilderExtensions.Button("+", Url(s => s with { Count = s.Count + 1 }), "simple-counter")
  </div>
</div>

@inject IHttpContextAccessor HttpContextAccessor

@code {
  protected override void OnInitialized()
  {
    // Auto-bind from query parameters
    var query = HttpContextAccessor.HttpContext?.Request.Query;
    if (query is not null && int.TryParse(query["Count"], out var count))
    {
      State = State with { Count = count };
    }
  }
}